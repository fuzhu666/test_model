_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[35],{"5Wrh":function(e,t,r){"use strict";var n=r("cpVT"),s=r("nKUr"),c=r("dhJC");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.a=function(e){var t=e.children,r=e.className,n=Object(c.a)(e,["children","className"]);return Object(s.jsx)("button",i(i({className:"relative items-center px-4 py-2 text-sm font-medium text-white bg-gray-800 border border-transparent shadow-sm rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-gray-500 disabled:opacity-60 disabled:cursor-auto ".concat(r)},n),{},{children:t}))}},BTLT:function(e,t,r){"use strict";r.r(t),r.d(t,"__N_SSP",(function(){return k}));var n=r("q1tI"),s=r("nKUr"),c=r("cpVT"),o=r("vJKn"),i=r.n(o),a=r("z7pX"),u=r("rg98"),l=r("lKb0"),d=r("Uhsv");function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=Object(l.a)((function(e,t){return{requests:[],setRequests:function(t){e({requests:t})},submitRequest:function(){var r=Object(u.a)(i.a.mark((function r(n){var s,c,o,u,l,b,j,m,p;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=n.request,c=n.description,o=void 0===c?"":c,u=n.category,l=void 0===u?"Model":u,b=n.user,j=t().requests,b){r.next=4;break}return r.abrupt("return",null);case 4:return m={request:s,description:o||"",category:l||"Model",upvotes:[null===b||void 0===b?void 0:b.id],user_id:null===b||void 0===b?void 0:b.id,created:new Date},e({requests:[f({id:"fake-id"},m)].concat(Object(a.a)(j)),requesting:!1}),r.next=8,d.a.from("requests").insert([m]);case 8:p=r.sent,p.error&&e({requests:j});case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),vote:function(){var r=Object(u.a)(i.a.mark((function r(n,s,c){var o,u,l;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=t().requests,u=o.map((function(e){return e.id===n?f(f({},e),{},{upvotes:[].concat(Object(a.a)(e.upvotes),[c])}):e})),e({requests:u}),r.next=5,d.a.from("requests").update({upvotes:[].concat(Object(a.a)(s),[c])}).match({id:n});case 5:l=r.sent,l.error&&e({requests:o});case 8:case"end":return r.stop()}}),r)})));return function(e,t,n){return r.apply(this,arguments)}}()}})),m=r("I/Ru"),p=function(e){var t=e.onSubmit,r=Object(n.useState)(""),c=r[0],o=r[1],i=Object(n.useState)(""),a=i[0],u=i[1],l=Object(n.useState)(""),d=l[0],b=l[1];return Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({request:c,description:a,category:d})},children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"request",className:"block text-sm font-medium text-gray-700",children:"What is the asset?"}),Object(s.jsx)("div",{className:"mt-1",children:Object(s.jsx)("input",{value:c,onChange:function(e){return o(e.target.value)},type:"text",name:"request",required:!0,id:"request",className:"block w-full text-gray-800 bg-white border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",placeholder:"A spaceship"})}),Object(s.jsxs)("div",{className:"mt-4",children:[Object(s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Anything else you can tell us? Examples?"}),Object(s.jsx)("div",{className:"mt-1",children:Object(s.jsx)("textarea",{value:a,onChange:function(e){return u(e.target.value)},type:"text",name:"description",id:"description",className:"block w-full text-gray-800 bg-white border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"})})]})]}),Object(s.jsxs)("div",{className:"mt-4",children:[Object(s.jsx)("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700",children:"What is the type of asset?"}),Object(s.jsxs)("select",{id:"type",name:"type",className:"block w-full py-2 pl-3 pr-10 mt-1 text-base text-gray-800 bg-white border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",defaultValue:"Model",value:d,onChange:function(e){return b(e.target.value)},children:[Object(s.jsx)("option",{children:"Model"}),Object(s.jsx)("option",{children:"Material"}),Object(s.jsx)("option",{children:"HDRI"})]})]}),Object(s.jsx)("button",{type:"submit",className:"relative items-center px-4 py-2 mt-4 text-sm font-medium text-white bg-gray-800 border border-transparent shadow-sm rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-gray-500",children:"Request"})]})},h=r("Pc32"),x=r("8QT5"),O=r("YFqc"),g=r.n(O),y=r("5Wrh"),v=function(e){var t=Object(h.a)((function(e){return e.user})),r=j((function(e){return e.vote})),n=function(){var t=Object(u.a)(i.a.mark((function t(){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=window.prompt("What is the id?",""))){t.next=4;break}return t.next=4,d.a.from("requests").update({closed:!0,closedBy:r}).match({id:e.id});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(s.jsx)("li",{children:Object(s.jsxs)("div",{className:"flex items-center justify-between relative",children:[e.closed&&Object(s.jsx)(g.a,{href:"/".concat(e.closedBy),children:Object(s.jsxs)("a",{style:{transform:"translateX(-50%) translateY(-50%)"},className:"absolute font-bold text-gray-800 underline top-[50%] left-[50%]",children:["closed by ",e.closedBy.split("/")[1]]})}),Object(s.jsx)("div",{className:"px-4 py-4 sm:px-6 ",children:Object(s.jsxs)("div",{className:"flex items-center ".concat(e.closed&&"opacity-40"," "),children:[Object(s.jsxs)("div",{className:"flex items-center flex-shrink-0 mr-6",children:[Object(s.jsx)(x.a,{disabled:t&&!e.upvotes.includes(null===t||void 0===t?void 0:t.id),content:t?"You have already voted":"You need an account to vote",children:Object(s.jsx)("div",{children:Object(s.jsx)("button",{className:"text-green-600 disabled:text-gray-300 disabled:cursor-default",disabled:!t||e.upvotes.includes(null===t||void 0===t?void 0:t.id),onClick:function(){return r(e.id,e.upvotes,t.id)},children:Object(s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})})})}),Object(s.jsx)("p",{className:"inline-flex px-2 text-lg font-bold text-gray-800 leading-5",children:e.upvotes.length})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{className:"text-sm font-medium text-indigo-600 truncate",children:e.request}),Object(s.jsx)("p",{className:"block mt-2 text-xs text-gray-800 truncate",children:e.description})]})]})}),Object(s.jsxs)("p",{className:"block mr-10 text-xs text-gray-800 truncate ".concat(e.closed&&"opacity-40"),children:[(null===t||void 0===t?void 0:t.profile)&&t.profile.admin&&!e.closed&&Object(s.jsx)(y.a,{className:"mr-5",onClick:n,children:"Close"}),Object(s.jsx)("span",{className:"inline-flex items-center px-3 mr-3 text-sm font-medium text-gray-800 bg-gray-100 rounded-full py-0.5",children:e.category||"Model"}),new Date(e.created).toLocaleString("en-US",{month:"long",day:"2-digit",year:"numeric"})]})]})})},w=r("Iv7c");function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k=!0;t.default=function(e){var t=e.user,r=e.requests,c=Object(n.useState)("open"),o=c[0],i=c[1],a=j((function(e){return{requesting:e.requesting,submitRequest:e.submitRequest,setRequests:e.setRequests,requests:e.requests}})),u=a.requesting,l=a.submitRequest,d=a.setRequests,b=a.requests;Object(n.useEffect)((function(){h.a.setState({title:"Asset Requests"})})),Object(n.useEffect)((function(){d(r)}),[r,d]);var f="open"===o?b.filter((function(e){return!e.closed})):b.filter((function(e){return e.closed}));return Object(s.jsxs)(m.a,{noTitle:!0,children:[Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"flex justify-between py-10",children:[Object(s.jsx)("h1",{className:"text-3xl font-bold leading-tight text-gray-900 \n                  ",children:"Model Requests"}),Object(s.jsx)(x.a,{content:"You need an account to request an asset",disabled:t,children:Object(s.jsx)("div",{children:Object(s.jsx)(y.a,{disabled:!t,onClick:function(){return t?j.setState({requesting:!u}):null},children:"Request an Asset"})})})]}),u&&Object(s.jsx)(p,{onSubmit:function(e){return l(N(N({},e),{},{user:t}))}})]}),Object(s.jsx)(w.a,{tabs:[{name:"Open (".concat(b.filter((function(e){return!e.closed})).length,")"),onClick:function(){return i("open")},current:"open"===o},{name:"Closed (".concat(b.filter((function(e){return e.closed})).length,")"),onClick:function(){return i("closed")},current:"closed"===o}]}),Object(s.jsx)("div",{className:"mt-10 overflow-hidden bg-white shadow sm:rounded-md",children:Object(s.jsx)("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:f.map((function(e){return Object(n.createElement)(v,N(N({closed:"closed"===o},e),{},{key:e.id}))}))})})]})}},Iv7c:function(e,t,r){"use strict";var n=r("nKUr"),s=r("7e7+");t.a=function(e){var t=e.tabs;return Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"sm:hidden",children:[Object(n.jsx)("label",{htmlFor:"tabs",className:"sr-only",children:"Select a tab"}),Object(n.jsx)("select",{id:"tabs",name:"tabs",className:"block w-full py-2 pl-3 pr-10 text-base bg-white border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",defaultValue:t.find((function(e){return e.current})).name,onChange:function(e){return t.find((function(t){return t.name===e.target.value})).onClick(e.target.value)},children:t.map((function(e){return Object(n.jsx)("option",{children:e.name},e.name)}))})]}),Object(n.jsx)("div",{className:"hidden sm:block",children:Object(n.jsx)("div",{className:"border-b border-gray-200",children:Object(n.jsx)("nav",{className:"flex -mb-px space-x-8","aria-label":"Tabs",children:t.map((function(e){return Object(n.jsx)("button",{onClick:e.onClick,className:Object(s.a)(e.current?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:border-none","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm "),"aria-current":e.current?"page":void 0,children:e.name},e.name)}))})})})]})}},tthF:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/request",function(){return r("BTLT")}])}},[["tthF",2,1,4,0,3,5]]]);